<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Google Calendar Events</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css" />
    <link href="style/ng-notify-custom.css" rel="stylesheet" />
    <link href="style/site.css" rel="stylesheet" />

    <link href="style/customLoadinBar.css" rel="stylesheet" />

</head>
<body ng-app="eventsApp" ng-controller="mainCtrl">

    <div class="main ng-cloak" ng-cloak>
        <div style="margin:0 auto; position:absolute; top:40%;left:50%; margin-left:-3%" ng-show="!currentUser">
            <h3 style="margin:0 auto; margin-left:-100%;padding-left:10px" class="text-center">Welcome to Google Events Manager</h3>
            <br />
            <button class="btn btn-primary"  ng-click="login()" style="margin-left:-100px;"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>&nbsp;Login with Google Account</button>
            <h6 style="margin:0 auto; margin-left:-100%; padding-left:15px" class="text-center"> Note: &nbsp; &nbsp; &nbsp; Allow pop-ups for auto login</h6>
        </div>
        <div class="container-fluid" ng-show="currentUser">
            <div style="padding:0 0 15px 0;border-bottom-style:solid;border-width:thin;border-color:lightgray" >
                <h3>Welcome {{currentUser.displayName}}!</h3>
                <img ng-src="{{currentUser.image.url.replace('sz=50','sz=100')}}" class="img-circle" alt="Google plus photo" style="margin-right:50px; margin-bottom:10px">
                <div style="display:inline-block; ">
                    <p style="display:inline-block">Email: {{currentUser.emails[0].value}}</p>
                    <br>
                    <a href="" ng-href="{{currentUser.url}}" style="display:inline-block" placeholder="Google+ url" target="_blank"> Google+ Account</a>
                </div>
            </div>
            <br />
            <div style="border-bottom-style:solid;border-width:thin;border-color:lightgray">

                <div class="input-group"  ng-show="currentUser" style="width:60%;float:left; margin-right:10px;margin-bottom:10px">
                    <span class="input-group-addon" id="basic-addon1" >Choose calendar:</span>
                    <select class="form-control" id="selectCalendar" name="calendar" ng-model="selectedCalendar" ng-options="cal as cal.summary for cal in calendars" ng-change="loadEvents()"></select>
                    
                </div>
                <button type="button" class="btn btn-primary"  aria-label="Left Align" data-toggle='modal' data-target='#addEventModal' ng-click="resetAddForm()">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true" ></span>Add new event
                </button>
                <br>
                <br>
                

            </div>
            <br />
            <div ng-show="currentUser">
                <tree-grid tree-data="tree_data" tree-control="my_tree" col-defs="col_defs" expand-on="expanding_property" on-select="my_tree_handlerCV(branch)" expand-level="1" icon-expand="glyphicon glyphicon-chevron-right" icon-collapse="glyphicon glyphicon-chevron-down" icon-leaf="glyphicon glyphicon-globe"></tree-grid>
            </div>
            <br />
            <br />
            <!-- View Event Modal-->
            <div id="viewEventModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header ">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title ">Event details</h4>
                        </div>

                        <form name="viewEventForm" role="form">
                            <div class="modal-body">
                                <!--Title-->
                                <div class="form-group row" ng-show="event.summary">
                                    <label for="title" class="col-xs-2 col-form-label" style="text-align:right;padding-right:0px; padding-top:5px;">Title</label>
                                    <div class="col-xs-10">
                                        <input class="form-control" id="title" type="text" value="" readonly ng-model="event.summary">
                                    </div>
                                </div>
                                <!--Creator-->
                                <div class="form-group row">
                                    <label for="creator" class="col-xs-2 col-form-label"  style="text-align:right;padding-right:0px; padding-top:5px;">Event creator</label>
                                    <div class="col-xs-10">
                                        <input class="form-control" id="creator" readonly ng-model="event.creator">
                                    </div>
                                </div>

                                <!--Description-->
                                <div class="form-group row" ng-show="event.description">
                                    <label for="description" class="col-xs-2 col-form-label"  style="text-align:right;padding-right:0px; padding-top:5px;">Note</label>
                                    <div class="col-xs-10">
                                        <textarea class="form-control" id="description" rows="3" readonly ng-model="event.description"></textarea>
                                    </div>
                                </div>

                                <!--Links-->
                                <!-- <div class="form-group row" data-ng-repeat="link in links" ng-hide="{{links[0].URL === undefined}}">
                                     <label for="links" ng-show="$first" class="col-xs-2 col-form-label">Links</label>
                                     <label class="col-xs-2 col-form-label" ng-show="$index>0"></label>
                                     <div class="col-xs-10">
                                         <label>Link {{$index+1}}</label>
                                         <input type="url" class="form-control" ng-model="link.URL" name="" placeholder="Enter link here" readonly>
                                         <input type="text" class="form-control" ng-model="link.DESCRIPTION" name="" readonly placeholder="Enter description here">
                                     </div>
                                 </div>-->
                                <!--StartDate-->
                                <div class="form-group row">
                                    <label for="datetimepickerStart" class="col-xs-2 col-form-label"  style="text-align:right;padding-right:0px; padding-top:5px;">Starts on &nbsp;<i class='glyphicon glyphicon-calendar' data-toggle='tooltip' title='Date when event starts.'></i></label>
                                    <div class="col-xs-10">
                                        <input class="form-control" type="text" value="" ng-model="event.startDateTime" readonly>
                                        <!--<div class="form-group">
                                            <div class='input-group date' id='datetimepickerStart'>
                                                <input type='text' class="form-control" ng-model="event.startDateTime"/>
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>-->
                                    </div>
                                </div>
                                <!--EndDate-->
                                <div class="form-group row">
                                    <label for="endDateTime" class="col-xs-2 col-form-label"  style="text-align:right;padding-right:0px; padding-top:5px;">Ends on &nbsp;<i class='glyphicon glyphicon-calendar' data-toggle='tooltip' title='Date when event ends.'></i></label>
                                    <div class="col-xs-10">
                                        <input class="form-control" type="text" value="" ng-model="event.endDateTime" readonly>
                                    </div>
                                </div>
                                <!--Location-->
                                <div class="form-group row" ng-show="event.location">
                                    <label for="location" class="col-xs-2 col-form-label"  style="text-align:right;padding-right:0px; padding-top:5px;">Location &nbsp;<i class='glyphicon glyphicon-pushpin' data-toggle='tooltip' title='Event location.'></i></label>
                                    <div class="col-xs-10">
                                        <input class="form-control" id="location" type="text" value="" ng-model="event.location" readonly>
                                    </div>
                                </div>
                                <!--Created-->
                                <div class="form-group row">
                                    <label for="created" class="col-xs-2 col-form-label" style="text-align:right;padding-right:0px; padding-top:5px;">Created &nbsp;<i class='glyphicon glyphicon-calendar' data-toggle='tooltip' title='Event creation date.'></i></label>
                                    <div class="col-xs-10">
                                        <input class="form-control" id="created" type="text" value="" ng-model="event.created" readonly>
                                    </div>
                                </div>
                                <!--Updated-->
                                <div class="form-group row" ng-show="event.updated">
                                    <label for="updated" class="col-xs-2 col-form-label"  style="text-align:right;padding-right:0px; padding-top:5px;">Updated<i class='glyphicon glyphicon-calendar' data-toggle='tooltip' title='Event updated.'></i></label>
                                    <div class="col-xs-10">
                                        <input class="form-control" id="updated" type="text" value="" ng-model="event.updated" readonly>
                                    </div>
                                </div>
                                <!--Attachments-->
                                <div class="form-group row" data-ng-repeat="attachment in event.attachments" ng-show="event.attachments">
                                    <label for="attachments" ng-show="$first" class="col-xs-2 col-form-label"  style="text-align:right;padding-right:0px; padding-top:5px;">Attachments</label>
                                    <label class="col-xs-2 col-form-label" ng-show="$index>0"></label>
                                    <div class="col-xs-10">
                                        <label>Attachment {{$index+1}}</label>
                                        <p class="" style="width:auto" placeholder="Attachment title">{{attachment.title}}</p>
                                        <a href="{{attachment.fileUrl}}" class="btn btn-default" placeholder="Attachment url"> Download</a>
                                    </div>
                                </div>
                                <!--Html Link-->
                                <div class="form-group row">
                                    <label for="htmlLink" class="col-xs-2 col-form-label"  style="text-align:right;padding-right:0px; padding-top:5px;">Event link<i  data-toggle='tooltip' title='Event link.'></i></label>
                                    <div class="col-xs-10">
                                        <a class="btn btn-success" href="#" ng-href="{{event.htmlLink}}" target="_blank"> <span class="glyphicon glyphicon-link" aria-hidden="true"></span> </a>
                                    </div>
                                </div>

                            </div>
                        </form>
                        <div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-primary" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>


                    <style>
                    </style>

                </div>
            </div>
            <!-- Edit Event Modal-->
            <div id="editEventModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Edit event</h4>
                        </div>

                        <form name="editEventForm" role="form">
                            <div class="modal-body">
                                <!--Title-->
                                <div class="form-group row">
                                    <label for="title" class="col-xs-2 col-form-label" style="text-align:right;padding-right:0px; padding-top:5px;">Title</label>
                                    <div class="col-xs-10">
                                        <input class="form-control" id="title" type="text" value="" ng-model="event.summary"  >
                                    </div>
                                </div>
                                <!--Description-->
                                <div class="form-group row">
                                    <label for="description" class="col-xs-2 col-form-label" style="text-align:right;padding-right:0px; padding-top:5px;">Note</label>
                                    <div class="col-xs-10">
                                        <textarea class="form-control" id="description" rows="3" ng-model="event.description"></textarea>
                                    </div>
                                </div>

                                <!--StartDate-->
                                <div class="form-group row">
                                    <label for="datetimepickerStart" class="col-xs-2 col-form-label" style="text-align:right;padding-right:0px; padding-top:5px;">Starts on &nbsp;<i class='glyphicon glyphicon-calendar' data-toggle='tooltip' title='Date when event starts.'></i></label>
                                    <div class="col-xs-10">
                                        <div class="form-group">
                                            <div class='input-group date' id='datetimepickerStart'>
                                                <input id="startDateTimePicker" type='text' class="form-control" ng-model="event.startDateTime" required readonly/>
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--EndDate-->
                                <div class="form-group row">
                                    <label for="endDateTime" class="col-xs-2 col-form-label" style="text-align:right;padding-right:0px; padding-top:5px;">Ends on &nbsp;<i class='glyphicon glyphicon-calendar' data-toggle='tooltip' title='Date when event ends.'></i></label>
                                    <div class="col-xs-10">
                                        <div class="form-group">
                                            <div class='input-group date' id='datetimepickerEnd'>
                                                <input id="endDateTimePicker" type='text' class="form-control" ng-model="event.endDateTime" required readonly />
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <!--Location-->
                                <!--<div class="form-group row" ng-hide="{{event.location===undefined}}">
                                    <label for="location" class="col-xs-2 col-form-label">Location<i class='glyphicon glyphicon-pushpin' data-toggle='tooltip' title='Event location.'></i></label>
                                    <div class="col-xs-10">
                                        <input class="form-control" id="location" type="text" value="" ng-model="event.location" readonly>
                                    </div>
                                </div>-->
                                <!--Attachments-->
                            </div>
                        </form>
                        <!-- ng-click="editEventForm.$rollbackViewValue();"-->
                        <div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-success" ng-click="editEvent(event)" data-dismiss="modal">Save</button>
                                <button type="reset" class="btn btn-primary" ng-click="cancel()" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Add Event Modal-->
            <div id="addEventModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Add event</h4>
                        </div>

                        <form name="addEventForm" role="form">
                            <div class="modal-body">
                                <!--Title-->
                                <div class="form-group row">
                                    <label for="title" class="col-xs-2 col-form-label" style="text-align:right;padding-right:0px; padding-top:5px;">Title</label>
                                    <div class="col-xs-10">
                                        <input class="form-control" id="title" type="text" value=""  ng-model="newEvent.summary">
                                    </div>
                                </div>
                                <!--Description-->
                                <div class="form-group row">
                                    <label for="description" class="col-xs-2 col-form-label" style="text-align:right;padding-right:0px; padding-top:5px;">Note</label>
                                    <div class="col-xs-10">
                                        <textarea class="form-control" id="description" rows="3" ng-model="newEvent.description"></textarea>
                                    </div>
                                </div>

                                <!--StartDate-->
                                <div class="form-group row">
                                    <label for="datetimepickerStartNew" class="col-xs-2 col-form-label" style="text-align:right;padding-right:0px; padding-top:5px;">Starts on &nbsp;<i class='glyphicon glyphicon-calendar' data-toggle='tooltip' title='Date when event starts.'></i></label>
                                    <div class="col-xs-10">
                                        <div class="form-group">
                                            <div class='input-group date' id='datetimepickerStartNew'>
                                                <input id="startDateTimePickerNew" type='text' class="form-control" ng-model="newEvent.startDateTime" required readonly />
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--EndDate-->
                                <div class="form-group row">
                                    <label for="endDateTime" class="col-xs-2 col-form-label" style="text-align:right;padding-right:0px; padding-top:5px;">Ends on &nbsp;<i class='glyphicon glyphicon-calendar' data-toggle='tooltip' title='Date when event ends.'></i></label>
                                    <div class="col-xs-10">
                                        <div class="form-group">
                                            <div class='input-group date' id='datetimepickerEndNew'>
                                                <input id="endDateTimePickerNew" type='text' class="form-control" ng-model="newEvent.endDateTime" required readonly/>
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-success" ng-click="addEvent(newEvent)" data-dismiss="modal">Add event</button>
                                <button type="reset" ng-click="addEventForm.$rollbackViewValue();" class="btn btn-primary" data-dismiss="modal">Dissmis</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Delete Event Modal-->
            <div id="deleteEventModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Delete Event</h4>
                        </div>
                        <div>
                            <div class="modal-body ">
                                <div class="text-center">
                                    <div class="text-danger text-large"><h4>Are you sure you want to proceed with deletion?</h4></div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-danger" ng-click="deleteEvent(event);" data-dismiss="modal">Yes</button>
                                <button type="reset"  class="btn btn-primary" data-dismiss="modal">No</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
    <div class="footer-bottom" style="position:absolute; border-bottom-style:solid;border-top-style:solid; border-width:thin;border-color:lightgray; padding-top:5px" >
        <div class="container">
            <div class="row">
                <div class="text-center">
                    <div class="design">
                        <p href="#" style="display:inline-block"> ©Ensar Muratovic </p> |  <a target="_blank" href="https://github.com/ensarmuratovic/">Github Account</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $('#datetimepickerStart').datetimepicker({
                ignoreReadonly: true
            });
            $('#datetimepickerEnd').datetimepicker({
                ignoreReadonly: true
            });
            $('#datetimepickerStartNew').datetimepicker({
                ignoreReadonly: true
            });
            $('#datetimepickerEndNew').datetimepicker({
                ignoreReadonly: true
            });
           
    
        });
    </script>

    <script src="scripts/angular.js"></script>
    <script src="scripts/angular-googleapi.js"></script>
    <script src="https://apis.google.com/js/client.js"></script>
    <script src="scripts/tree-grid-directive.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="scripts/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ng-notify/0.8.0/ng-notify.min.js"></script>
    <!-- Load app main script -->
    <script src="app/app.js?v=2"></script>
    <script src="app/controllers/mainController.js"></script>
    <script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/angular-loading-bar/0.9.0/loading-bar.min.js'></script>

</body>





</html>
